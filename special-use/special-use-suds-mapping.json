{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Special use application",
    "description": "A rough sketch of the POST JSON HTTP request for a special use permit from our ePermitting system the U.S. Forest Service",
    "definitions": {
      "applicant-info": {
        "type": "object",
        "properties": {
      		"firstName": { "type": "string", "basic-api-field" : "FIRST_NAME"},
      		"lastName": {	"type": "string", "basic-api-field" : "LAST_NAME" },
          "dayPhone": { "$ref": "#/definitions/phone-number" },
          "eveningPhone": { "$ref": "#/definitions/phone-number" },
          "emailAddress": { "type": "string", "basic-api-field" : "EMAIL"},
          "mailingAddress": { "type": "string", "basic-api-field" : "ADDRESS_1"},
          "mailingAddress2": { "type": "string", "basic-api-field" : "ADDRESS_2"},
          "mailingCity": { "type": "string", "basic-api-field" : "CITY_NAME"},
          "mailingState": { "type": "string", "basic-api-field" : "STATE_CODE"},
          "mailingZIP": { "type": "integer", "basic-api-field": "POSTAL_CODE"},
      		"organizationName": {
      			"description": "The name of the group, company, organization or event applying",
      			"type": "integer",
      		},
          "website": { "type": "string", "suds-table": "Contact", "suds-field": "Remarks" },
          "orgType": { "type": { "enum": [ "Individual"  , "Corporation"  , "Limited Liability Company"  , "Partnership or Association"  , "State Government or Agency"  , "Local Government or Agency"  , "Nonprofit" ] }, "basic-api-field" : "ORG_TYPE, ORG_CODE" },
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "COUNTRY_NAME", "value" : "United States of America"},
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "CONT_NAME", "note" : "Should be either the organizationName or the first/last name"},
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "CONTACT_TYPE", "note" : "If organizationName is filled, then should be ORGANIZATION. If not PERSON."},
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "ADDRESS_TYPE", "value" : "Main"},

        "required": ["firstName","lastName","dayPhone","emailAddress","mailingAddress","mailingCity","mailingZIP","mailingState"]
      },
      "phoneNumber": {
        "type": "object",
        "properties": {
          "areaCode": { "type": "integer", "basic-api-field": "AREA_CODE"},
          "number": { "type": "integer", "basic-api-field": "PHONE_NUMBER"},
          "extension": { "type": "integer", "basic-api-field": "EXTENSION"},
          "type": { "basic-api-field" : "PHONE_NUMBER_TYPE"},
        },
        "required": ["areaCode","number","type"]
      },
      "non-commercial-fields": {
        "type": "object",
        "properties": {
      		"activityDescription": { "type": "string", "note": "See the 'not accessible to middleware' note."},
      		"locationDescription": {	"type": "string", "note": "See the 'not accessible to middleware' note."},
          "startDateTime": { "type": "dateTime", "note": "See the 'not accessible to middleware' note."},
          "endDateTime": { "type": "dateTime", "note": "See the 'not accessible to middleware' note." },
          "numberParticipants" : { "type": "integer",  "note": "See the 'not accessible to middleware' note." },
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "PURPOSE", "note" : "This field should be a concatenation of activityDescription, locationDescription, startDateTime, endDateTime."},
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "CR_EXEMPT", "value" : "Y"},
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "FORM_NAME", "value" : "FS-2700-3b"},
          },
      },
      "temp-outfitter-fields": {
        "type": "object",
        "properties": {
      		"insuranceCertificate": {	"type": "file" },
          "goodStandingEvidence": {
      			"description": "Certificate of good standing, operating agreement, or other evidence the business is in good standing",
            "note": "See the 'not accessible to middleware' note below this one.",
            "type": "file"
          },
          "operatingPlan": {
      			"description": "A completed Word or RTF operating plan template.",
            "note": "See the 'not accessible to middleware' note below this one.",
            "type": "file"
          },
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "PURPOSE", "note" : "This field should be a concatenation of activityDescription, locationDescription, startDateTime, endDateTime."},
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "CR_EXEMPT", "value" : "N"},
          "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "FORM_NAME", "value" : "FS-2700-3f"},
         "required": ["orgType","insuranceCertificate","goodStandingEvidence","operatingPlan"]
      },
    },
    "type": "object",
    "properties": {
      "region": { "type" : "integer" },
      "forest": { "type" : "integer" },
      "district": { "type" : "integer" },
      "authorizingOfficerName": { "type" : "string" , "basic-api-field" : "AUTH_OFFICER_NAME"},
      "authorizingOfficerTitle": { "type" : "string" , "basic-api-field" : "AUTH_OFFICER_TITLE"},
      "applicant-info" : {
        "oneOf" : [
          { "$ref": "#/definitions/applicant-info" },
          { "contact-id": { "type" : "integer" , "basic-api-field" : "CONT_ID" } }
        ]
      },
      "type" : { "enum" : ["non-commercial","temp-outfitter-guide"], "note" : "See the FORM_NAME fields in the blocks specific to each permit type"},
      "type-specific-fields": {
        "oneOf": [
          { "$ref": "#/definitions/non-commercial-fields" },
          { "$ref": "#/definitions/temp-outfitter-fields" },
        ]
      },
      "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "SECURITY_ID", "note" : "Concatenation of region, forest and district code"},
      "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "MANAGING_ORG", "note" : "Concatenation of region, forest and district code"},
      "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "ADMIN_ORG", "note" : "Concatenation of region, forest and district code"},
      "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "SUDS_ID", "note" : "Generate an ID number that starts with forest alphacode, followed by five 0s, and then an incrementing number. "},
      "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "EFFECTIVE_DATE", "value" : "Today's date"},
      "NOT_ACCESSIBLE_VIA_PUBLIC_API": { "basic-api-field": "STATUS", "value" : "Accepted"},
    }
}
